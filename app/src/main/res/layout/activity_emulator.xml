<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="#000000">

    <!-- ===== TOP: Main area (CRT + Control Panel) ===== -->
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:orientation="horizontal">

        <!-- CRT Screen -->
        <FrameLayout
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="3"
            android:background="#000000">

            <com.imlac.pds1.CrtView
                android:id="@+id/crt_view"
                android:layout_width="match_parent"
                android:layout_height="match_parent"/>

            <TextView
                android:id="@+id/tv_fps"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="top|start"
                android:layout_margin="6dp"
                android:text="30fps"
                android:textColor="#224422"
                android:textSize="9sp"
                android:fontFamily="monospace"/>
        </FrameLayout>

        <!-- Control Panel -->
        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1.35"
            android:orientation="vertical"
            android:background="#0A0A0A"
            android:paddingStart="5dp"
            android:paddingEnd="5dp"
            android:paddingTop="3dp"
            android:paddingBottom="3dp">

            <!-- REGISTERS -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:background="#050505"
                android:padding="2dp">
                <TextView android:id="@+id/reg_pc"   style="@style/RegStyle" android:text="PC:0000"/>
                <TextView android:id="@+id/reg_ac"   style="@style/RegStyle" android:text="AC:0000"/>
                <TextView android:id="@+id/reg_ir"   style="@style/RegStyle" android:text="IR:0000"/>
                <TextView android:id="@+id/reg_link" style="@style/RegStyle" android:text="L:0"/>
                <TextView android:id="@+id/reg_dpx"  style="@style/RegStyle" android:text="DX:000"/>
                <TextView android:id="@+id/reg_dpy"  style="@style/RegStyle" android:text="DY:000"/>
                <View android:layout_width="0dp" android:layout_height="1dp" android:layout_weight="1"/>
                <TextView android:id="@+id/status_text" style="@style/RegStyle"
                    android:text="HALT" android:textColor="#FF3300"/>
            </LinearLayout>

            <!-- FPS SLIDER -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:gravity="center_vertical"
                android:layout_marginTop="3dp">
                <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                    android:text="FPS " android:textColor="#333333"
                    android:textSize="8sp" android:fontFamily="monospace"/>
                <SeekBar
                    android:id="@+id/sb_fps"
                    android:layout_width="0dp" android:layout_height="18dp"
                    android:layout_weight="1"
                    android:max="59" android:progress="29"
                    android:progressTint="#004400" android:thumbTint="#00AA22"/>
            </LinearLayout>

            <!-- MACHINE BUTTONS -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:layout_marginTop="3dp">
                <Button android:id="@+id/btn_power" style="@style/PanelBtn"
                    android:text="PWR" android:backgroundTint="#002200"/>
                <Button android:id="@+id/btn_reset" style="@style/PanelBtn" android:text="RST"/>
                <Button android:id="@+id/btn_run"   style="@style/PanelBtn"
                    android:text="RUN" android:backgroundTint="#002200"/>
                <Button android:id="@+id/btn_halt"  style="@style/PanelBtn"
                    android:text="HLT" android:backgroundTint="#220000"/>
                <Button android:id="@+id/btn_step"  style="@style/PanelBtn" android:text="STP"/>
            </LinearLayout>

            <!-- DEMO BUTTONS -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:layout_marginTop="2dp">
                <Button android:id="@+id/btn_demo_star"      style="@style/DemoBtn" android:text="STAR"/>
                <Button android:id="@+id/btn_demo_lines"     style="@style/DemoBtn" android:text="LINE"/>
                <Button android:id="@+id/btn_demo_lissajous" style="@style/DemoBtn" android:text="LISS"/>
                <Button android:id="@+id/btn_demo_bounce"    style="@style/DemoBtn" android:text="BNCE"/>
                <Button android:id="@+id/btn_demo_maze"      style="@style/DemoBtn" android:text="MAZE"/>
                <Button android:id="@+id/btn_demo_spacewar"  style="@style/DemoBtn" android:text="SWAR"/>
            </LinearLayout>

            <!-- MAZE WAR + GAMES -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:layout_marginTop="3dp">
                <Button android:id="@+id/btn_mazewar"
                    android:layout_width="0dp" android:layout_height="26dp"
                    android:layout_weight="1"
                    android:text="MAZE WAR" android:textColor="#00FF41"
                    android:textSize="8sp" android:fontFamily="monospace"
                    android:backgroundTint="#001800" android:layout_marginEnd="2dp"/>
                <Button android:id="@+id/btn_games"
                    android:layout_width="0dp" android:layout_height="26dp"
                    android:layout_weight="1"
                    android:text="GAMES" android:textColor="#4488FF"
                    android:textSize="8sp" android:fontFamily="monospace"
                    android:backgroundTint="#05050F"/>
            </LinearLayout>

            <!-- DIVIDER -->
            <View android:layout_width="match_parent" android:layout_height="1dp"
                android:background="#181818"
                android:layout_marginTop="5dp" android:layout_marginBottom="3dp"/>

            <!-- CONTROLLER / KEYBOARD TOGGLE -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:gravity="center_vertical"
                android:layout_marginBottom="3dp">
                <TextView
                    android:id="@+id/tv_input_mode"
                    android:layout_width="0dp" android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:text="CONTROLLER"
                    android:textColor="#222222"
                    android:textSize="7sp" android:fontFamily="monospace"/>
                <Button
                    android:id="@+id/btn_toggle_input"
                    android:layout_width="wrap_content" android:layout_height="22dp"
                    android:text="⌨ KBD"
                    android:textColor="#335533"
                    android:textSize="7sp" android:fontFamily="monospace"
                    android:backgroundTint="#0A0A0A"
                    android:paddingStart="6dp" android:paddingEnd="6dp"/>
            </LinearLayout>

            <!-- CONTROLLER (default visible) -->
            <LinearLayout
                android:id="@+id/panel_controller"
                android:layout_width="match_parent"
                android:layout_height="0dp"
                android:layout_weight="1"
                android:orientation="horizontal"
                android:visibility="visible">

                <!-- D-PAD -->
                <LinearLayout
                    android:layout_width="0dp"
                    android:layout_height="match_parent"
                    android:layout_weight="1"
                    android:orientation="vertical"
                    android:layout_marginEnd="6dp">

                    <LinearLayout android:layout_width="match_parent"
                        android:layout_height="0dp" android:layout_weight="1"
                        android:orientation="horizontal">
                        <View android:layout_width="0dp" android:layout_height="match_parent" android:layout_weight="1"/>
                        <Button android:id="@+id/dp_up" style="@style/DpadBtn"
                            android:layout_width="0dp" android:layout_height="match_parent"
                            android:layout_weight="1" android:text="▲"/>
                        <View android:layout_width="0dp" android:layout_height="match_parent" android:layout_weight="1"/>
                    </LinearLayout>

                    <LinearLayout android:layout_width="match_parent"
                        android:layout_height="0dp" android:layout_weight="1"
                        android:orientation="horizontal">
                        <Button android:id="@+id/dp_left" style="@style/DpadBtn"
                            android:layout_width="0dp" android:layout_height="match_parent"
                            android:layout_weight="1" android:text="◀"/>
                        <View android:layout_width="0dp" android:layout_height="match_parent"
                            android:layout_weight="1" android:background="#0A150A"/>
                        <Button android:id="@+id/dp_right" style="@style/DpadBtn"
                            android:layout_width="0dp" android:layout_height="match_parent"
                            android:layout_weight="1" android:text="▶"/>
                    </LinearLayout>

                    <LinearLayout android:layout_width="match_parent"
                        android:layout_height="0dp" android:layout_weight="1"
                        android:orientation="horizontal">
                        <View android:layout_width="0dp" android:layout_height="match_parent" android:layout_weight="1"/>
                        <Button android:id="@+id/dp_down" style="@style/DpadBtn"
                            android:layout_width="0dp" android:layout_height="match_parent"
                            android:layout_weight="1" android:text="▼"/>
                        <View android:layout_width="0dp" android:layout_height="match_parent" android:layout_weight="1"/>
                    </LinearLayout>
                </LinearLayout>

                <!-- ACTION BUTTONS -->
                <LinearLayout
                    android:layout_width="0dp"
                    android:layout_height="match_parent"
                    android:layout_weight="1"
                    android:orientation="vertical">
                    <LinearLayout android:layout_width="match_parent"
                        android:layout_height="0dp" android:layout_weight="1"
                        android:orientation="horizontal">
                        <Button android:id="@+id/btn_b" style="@style/ActionBtn"
                            android:layout_width="0dp" android:layout_height="match_parent"
                            android:layout_weight="1" android:text="B"
                            android:textColor="#4466AA" android:backgroundTint="#00081A"/>
                        <Button android:id="@+id/btn_a" style="@style/ActionBtn"
                            android:layout_width="0dp" android:layout_height="match_parent"
                            android:layout_weight="1" android:text="A"
                            android:textColor="#00FF41" android:backgroundTint="#001800"/>
                    </LinearLayout>
                    <LinearLayout android:layout_width="match_parent"
                        android:layout_height="0dp" android:layout_weight="1"
                        android:orientation="horizontal">
                        <Button android:id="@+id/btn_d" style="@style/ActionBtn"
                            android:layout_width="0dp" android:layout_height="match_parent"
                            android:layout_weight="1" android:text="D"
                            android:textColor="#FFAA00" android:backgroundTint="#150F00"/>
                        <Button android:id="@+id/btn_c" style="@style/ActionBtn"
                            android:layout_width="0dp" android:layout_height="match_parent"
                            android:layout_weight="1" android:text="C"
                            android:textColor="#FF4400" android:backgroundTint="#150000"/>
                    </LinearLayout>
                </LinearLayout>
            </LinearLayout>

            <!-- KEYBOARD (hidden by default) -->
            <LinearLayout
                android:id="@+id/panel_keyboard"
                android:layout_width="match_parent"
                android:layout_height="0dp"
                android:layout_weight="1"
                android:orientation="vertical"
                android:visibility="gone">

                <!-- Row 1: 1-9 0 -->
                <LinearLayout android:layout_width="match_parent"
                    android:layout_height="0dp" android:layout_weight="1"
                    android:orientation="horizontal">
                    <Button style="@style/KbdBtn" android:id="@+id/k_1"  android:text="1"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_2"  android:text="2"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_3"  android:text="3"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_4"  android:text="4"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_5"  android:text="5"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_6"  android:text="6"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_7"  android:text="7"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_8"  android:text="8"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_9"  android:text="9"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_0"  android:text="0"/>
                </LinearLayout>

                <!-- Row 2: Q W E R T Y U I O P -->
                <LinearLayout android:layout_width="match_parent"
                    android:layout_height="0dp" android:layout_weight="1"
                    android:orientation="horizontal">
                    <Button style="@style/KbdBtn" android:id="@+id/k_q"  android:text="Q"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_w"  android:text="W"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_e"  android:text="E"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_r"  android:text="R"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_t"  android:text="T"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_y"  android:text="Y"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_u"  android:text="U"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_i"  android:text="I"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_o"  android:text="O"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_p"  android:text="P"/>
                </LinearLayout>

                <!-- Row 3: A S D F G H J K L -->
                <LinearLayout android:layout_width="match_parent"
                    android:layout_height="0dp" android:layout_weight="1"
                    android:orientation="horizontal">
                    <Button style="@style/KbdBtn" android:id="@+id/k_a"  android:text="A"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_s"  android:text="S"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_d"  android:text="D"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_f"  android:text="F"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_g"  android:text="G"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_h"  android:text="H"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_j"  android:text="J"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_k"  android:text="K"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_l"  android:text="L"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_bs"
                        android:text="⌫" android:textColor="#FF4422"/>
                </LinearLayout>

                <!-- Row 4: Z X C V B N M  SP  ENT -->
                <LinearLayout android:layout_width="match_parent"
                    android:layout_height="0dp" android:layout_weight="1"
                    android:orientation="horizontal">
                    <Button style="@style/KbdBtn" android:id="@+id/k_z"   android:text="Z"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_x"   android:text="X"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_c"   android:text="C"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_v"   android:text="V"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_b"   android:text="B"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_n"   android:text="N"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_m"   android:text="M"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_esc"
                        android:text="ESC" android:textColor="#FFAA00"
                        android:layout_weight="1.3"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_sp"
                        android:text="SPC" android:textColor="#AAFFAA"
                        android:layout_weight="1.5"/>
                    <Button style="@style/KbdBtn" android:id="@+id/k_ent"
                        android:text="ENT" android:textColor="#44FF88"
                        android:backgroundTint="#001A00"
                        android:layout_weight="1.3"/>
                </LinearLayout>

            </LinearLayout>

            <!-- KEY HINT -->
            <TextView
                android:id="@+id/tv_input_hint"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="A=SPACE  B=F  C=E  D=Q  |  ▲▼◀▶=WASD"
                android:textColor="#1C1C1C"
                android:textSize="7sp"
                android:fontFamily="monospace"
                android:layout_marginTop="3dp"/>

        </LinearLayout>
    </LinearLayout>

</LinearLayout>
